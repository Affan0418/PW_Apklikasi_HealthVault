<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Klinik MDP Jaya</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f5f5f5;
        display: flex;
        min-height: 100vh;
      }
      .sidebar {
        width: 240px;
        background: #343a40;
        color: #fff;
        position: fixed;
        height: 100vh;
        z-index: 1000;
      }
      .sidebar h5 {
        border-bottom: 1px solid #4b545c;
        padding: 20px 15px;
        margin-bottom: 0;
      }
      .sidebar a {
        color: #c2c7d0;
        text-decoration: none;
        padding: 12px 20px;
        display: block;
        transition: 0.3s;
      }
      .sidebar a:hover {
        background: #494e53;
        color: #fff;
      }
      .sidebar a.active {
        background: #0d6efd;
        color: #fff;
      }
      .content {
        flex: 1;
        margin-left: 240px;
        display: flex;
        flex-direction: column;
      }
      .topbar {
        background: #0d6efd;
        color: #fff;
        padding: 10px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      .main-container {
        padding: 25px;
      }
    </style>
  </head>
  <body>
    <div class="sidebar">
      <h5><i class="bi bi-hospital"></i> Klinik HealthVault</h5>
      <a
        href="/dashboard"
        class="{{ 'active' if request.path == '/dashboard' }}"
        ><i class="bi bi-house-door me-2"></i> Dashboard</a
      >
      <a
        href="{{ url_for('pasien') }}"
        class="{{ 'active' if '/pasien' in request.path }}"
        ><i class="bi bi-people me-2"></i> Data Pasien</a
      >
      {% if session['role'] == 'admin' %}
      <a
        href="{{ url_for('dokter') }}"
        class="{{ 'active' if '/dokter' in request.path }}"
        ><i class="bi bi-person-badge me-2"></i> Data Dokter</a
      >
      {% endif %}
      <a
        href="{{ url_for('obat') }}"
        class="{{ 'active' if '/obat' in request.path }}"
        ><i class="bi bi-capsule me-2"></i> Data Obat</a
      >
      <a
        href="{{ url_for('kunjungan') }}"
        class="{{ 'active' if '/kunjungan' in request.path }}"
        ><i class="bi bi-clock-history me-2"></i> Riwayat Kunjungan</a
      >

      {% if session['role'] == 'admin' %}
      <a
        href="{{ url_for('pengaturan') }}"
        class="{{ 'active' if request.path == '/pengaturan' }}"
        ><i class="bi bi-gear me-2"></i> Pengaturan</a
      >
      {% endif %}
    </div>

    <div class="content">
      <div class="topbar">
        <div>
          <i class="bi bi-list d-md-none"></i>
        </div>
        <div class="dropdown">
          
          <a
            href="{{ url_for('profile') }}" 
            class="text-white text-decoration-none me-3"
          >
            <i class="bi bi-person-circle me-1"></i> {{ session['nama'] }}
            <span class="badge bg-light text-primary ms-1 small"
              >{{ session['role']|upper }}</span
            >
          </a>
          
          <a href="/logout" class="btn btn-sm btn-outline-light">
            <i class="bi bi-box-arrow-right"></i> Keluar
          </a>
        </div>
      </div>

      <div class="main-container">{% block content %} {% endblock %}</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>